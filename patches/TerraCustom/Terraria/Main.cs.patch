--- src/tModLoader\Terraria\Main.cs
+++ src/TerraCustom\Terraria\Main.cs
@@ -46,11 +_,13 @@
 using Terraria.ModLoader.IO;
 using Terraria.Net;
 using Terraria.ObjectData;
+
 using Terraria.Social;
 using Terraria.UI;
 using Terraria.UI.Chat;
 using Terraria.Utilities;
 using Terraria.World.Generation;
+using Terraria.TerraCustom;
 
 #if SERVER
 using Terraria.Server;
@@ -134,12 +_,21 @@
 		public bool unityMouseOver;
 		public static Main instance;
 		public static int curRelease = 156;
-		public static string versionNumber = "v1.3.0.8";
-		public static string versionNumber2 = "v1.3.0.8";
+		public static string versionNumber = "jopojelly's TerraCustom v0.3.1";
+		public static string versionNumber2 = "jopojelly's TerraCustom v0.3.1";
+		// TerraCustom Start
+		public static Setting setting = new Setting();
+		public static SettingSaver settingSaver = new SettingSaver();
+		public static int bgStylePreview = 1;
+		public static bool tModLoaderModsLoaded = false;
+		public static bool firstModLoad = true;
+		// TerraCustom End
 		public static string SavePath = Program.LaunchParameters.ContainsKey("-savedirectory") ? Program.LaunchParameters["-savedirectory"] : PlatformUtilties.GetStoragePath();
+		public static string TModLoaderSavePath = Path.Combine(Program.LaunchParameters.ContainsKey("-savedirectory") ? Program.LaunchParameters["-savedirectory"] : PlatformUtilties.GetStoragePath(), "ModLoader");
+		public static string TerraCustomSavePath = Path.Combine(Program.LaunchParameters.ContainsKey("-savedirectory") ? Program.LaunchParameters["-savedirectory"] : PlatformUtilties.GetStoragePath(), "TerraCustom");
 		public static Vector2 destroyerHB = new Vector2(0f, 0f);
 		public static FavoritesFile LocalFavoriteData = new FavoritesFile(Main.SavePath + "/favorites.json", false);
-		public static FavoritesFile CloudFavoritesData = new FavoritesFile("/ModLoader/favorites.json", true);
+		public static FavoritesFile CloudFavoritesData = new FavoritesFile("/favorites.json", true);
 		public static FileMetadata WorldFileMetadata;
 		public static FileMetadata MapFileMetadata;
 		private AchievementManager _achievements;
@@ -344,7 +_,7 @@
 		public static int[] desertBG = new int[2];
 		public static int oceanBG;
 		public static int[] treeX = new int[4];
-		public static int[] treeStyle = new int[4];
+		public static int[] treeStyle = new int[] { 6, 6, 6, 6 };
 		public static int[] caveBackX = new int[4];
 		public static int[] caveBackStyle = new int[4];
 		public static int iceBackStyle;
@@ -458,7 +_,7 @@
 		private static bool flameRingLoaded;
 		private Texture2D flameRingTexture;
 		private Texture2D mapDeathTexture;
-		public RenderTarget2D[,] mapTarget = new RenderTarget2D[Main.mapTargetX, Main.mapTargetY];
+		private RenderTarget2D[,] mapTarget = new RenderTarget2D[Main.mapTargetX, Main.mapTargetY];
 		private RenderTarget2D mapSectionTexture;
 		public static bool[,] initMap = new bool[Main.mapTargetX, Main.mapTargetY];
 		public static bool[,] mapWasContentLost = new bool[Main.mapTargetX, Main.mapTargetY];
@@ -584,6 +_,7 @@
 		public static bool serverStarting = false;
 		public static float leftWorld = 0f;
 		public static float rightWorld = 134400f;
+		// TODO changes here? *2   == 8400 * 16
 		public static float topWorld = 0f;
 		public static float bottomWorld = 38400f;
 		public static int maxTilesX = (int)Main.rightWorld / 16 + 1;
@@ -1113,6 +_,7 @@
 		public static bool tilesLoaded = false;
 		public static WorldMap Map = new WorldMap(Main.maxTilesX, Main.maxTilesY);
 		public static Tile[,] tile = new Tile[Main.maxTilesX, Main.maxTilesY];
+		// Adjust
 		public static Dust[] dust = new Dust[6001];
 		public static Star[] star = new Star[130];
 		public static Item[] item = new Item[401];
@@ -1265,10 +_,13 @@
 		public static List<WorldFileData> WorldList = new List<WorldFileData>();
 		public static WorldFileData ActiveWorldFileData = new WorldFileData();
 		public static string WorldPath = Main.SavePath + Path.DirectorySeparatorChar + "Worlds";
-		public static string CloudWorldPath = "ModLoader/worlds";
+		public static string TModLoaderWorldPath = Main.TModLoaderSavePath + Path.DirectorySeparatorChar + "Worlds";
+		public static string LeveledWorldPath = Main.SavePath.Substring(0, Main.SavePath.Length - 8) + "Terraria Leveled" + Path.DirectorySeparatorChar + "Worlds";
+		public static string CloudWorldPath = "worlds";
 		public static string PlayerPath = Main.SavePath + Path.DirectorySeparatorChar + "Players";
-		public static string CloudPlayerPath = "ModLoader/players";
+		public static string CloudPlayerPath = "players";
 		public static Preferences Configuration = new Preferences(Main.SavePath + Path.DirectorySeparatorChar + "config.json", false, false);
+		public static string SettingPath = Main.TerraCustomSavePath;
 		public static string[] itemName = new string[3602];
 		public static string[] npcName = new string[540];
 		private static KeyboardState inputText;
@@ -1919,14 +_,15 @@
 		private float logoScale = 1f;
 		private float logoScaleDirection = 1f;
 		private float logoScaleSpeed = 1f;
-		private static int maxMenuItems = 16;
+		public static int maxMenuItems = 24;
+//16;
 		private float[] menuItemScale = new float[Main.maxMenuItems];
 		private int focusMenu = -1;
-		private int selectedMenu = -1;
-		private int selectedMenu2 = -1;
+		public int selectedMenu = -1;
+		public int selectedMenu2 = -1;
 		public static int selectedPlayer = 0;
 		public static int selectedWorld = 0;
-		public static int menuMode = Interface.loadModsID;
+		public static int menuMode = ModLoader.Interface.loadModsID;//(int)TerraCustom.MenuModes.ChooseWorldSize;//0;
 		public static int menuSkip = 0;
 		private static Item cpItem = new Item();
 		public int textBlinkerCount;
@@ -1986,6 +_,12 @@
 		private float scAdj;
 		private float cTop;
 
+		public static Texture2D TCTreeTops;
+		public static Texture2D TCMossColors;
+		public static Texture2D TCDungeonColors;
+
+		public int lastSelectedMenu = -1;
+
 		public static event Action OnEngineLoad;
 		public static event Action OnTick;
 
@@ -2157,11 +_,13 @@
 				flag = false;
 				Main.anglerQuest = Main.rand.Next(Main.anglerQuestItemNetIDs.Length);
 				int num = Main.anglerQuestItemNetIDs[Main.anglerQuest];
-				if (num == 2454 && (!Main.hardMode || WorldGen.crimson))
+				//if (num == 2454 && (!Main.hardMode || WorldGen.crimson))
+				if (num == 2454 && (!Main.hardMode || WorldGen.crimson || Main.setting.IsCorruption == 2 || Main.setting.IsCorruption != 4))
 				{
 					flag = true;
 				}
-				if (num == 2457 && WorldGen.crimson)
+				//if (num == 2457 && WorldGen.crimson)
+				if (num == 2457 && (WorldGen.crimson || Main.setting.IsCorruption == 2 || Main.setting.IsCorruption != 4))
 				{
 					flag = true;
 				}
@@ -2169,7 +_,8 @@
 				{
 					flag = true;
 				}
-				if (num == 2463 && (!Main.hardMode || !WorldGen.crimson))
+				//if (num == 2463 && (!Main.hardMode || !WorldGen.crimson))
+				if (num == 2463 && (!Main.hardMode || !WorldGen.crimson || Main.setting.IsCorruption == 2 || Main.setting.IsCorruption != 4))
 				{
 					flag = true;
 				}
@@ -2189,7 +_,8 @@
 				{
 					flag = true;
 				}
-				if (num == 2477 && !WorldGen.crimson)
+				//if (num == 2477 && !WorldGen.crimson)
+				if (num == 2477 && (!WorldGen.crimson || Main.setting.IsCorruption == 2 || Main.setting.IsCorruption != 4))
 				{
 					flag = true;
 				}
@@ -2205,7 +_,8 @@
 				{
 					flag = true;
 				}
-				if (num == 2485 && WorldGen.crimson)
+				//if (num == 2485 && WorldGen.crimson)
+				if (num == 2485 && (WorldGen.crimson || Main.setting.IsCorruption == 2 || Main.setting.IsCorruption != 4))
 				{
 					flag = true;
 				}
@@ -2232,6 +_,7 @@
 					Main.WorldList.Add(WorldFileData.FromInvalidWorld(files[i], false));
 				}
 			}
+			/*
 			if (SocialAPI.Cloud != null)
 			{
 				List<string> files2 = SocialAPI.Cloud.GetFiles(Regex.Escape(Main.CloudWorldPath) + "/.+\\.wld");
@@ -2248,6 +_,7 @@
 					}
 				}
 			}
+			*/
 			Main.WorldList.Sort(new Comparison<WorldFileData>(Main.WorldListSortMethod));
 		}
 
@@ -2270,6 +_,7 @@
 					Main.PlayerList.Add(fileData);
 				}
 			}
+			/*
 			if (SocialAPI.Cloud != null)
 			{
 				List<string> files2 = SocialAPI.Cloud.GetFiles(Regex.Escape(Main.CloudPlayerPath) + "/.+\\.plr");
@@ -2282,6 +_,7 @@
 					}
 				}
 			}
+			*/
 			Main.PlayerList.Sort(new Comparison<PlayerFileData>(Main.PlayerListSortMethod));
 		}
 
@@ -2381,7 +_,7 @@
 			Main.Configuration.Put("KeyMapAlphaUp", Main.cMapAlphaUp);
 			Main.Configuration.Put("KeyMapAlphaDown", Main.cMapAlphaDown);
 			Main.Configuration.Put("KeyFavoriteModifier", Main.cFavoriteKey);
-			Main.Configuration.Put("Fullscreen", Main.graphics.IsFullScreen);
+			//Main.Configuration.Put("Fullscreen", Main.graphics.IsFullScreen);
 			Main.Configuration.Put("WindowMaximized", Main.screenMaximized);
 			Main.Configuration.Put("DisplayWidth", Main.graphics.PreferredBackBufferWidth);
 			Main.Configuration.Put("DisplayHeight", Main.graphics.PreferredBackBufferHeight);
@@ -2406,7 +_,6 @@
 			Main.Configuration.Put("ThickMouseEdges", Main.ThickMouse);
 			Main.Configuration.Put("ThickMouseEdgesPackedColor", Main.ThickMousePackedColor);
 			Main.Configuration.Put("ReverseUpDownForArmorSetBonuses", Main.ReversedUpDownArmorSetBonuses);
-			ModLoader.ModLoader.SaveConfiguration();
 			return Main.Configuration.Save(true);
 		}
 
@@ -2501,7 +_,7 @@
 			bool fullscreen = false;
 			int preferredBackBufferWidth = Main.graphics.PreferredBackBufferWidth;
 			int preferredBackBufferHeight = Main.graphics.PreferredBackBufferHeight;
-			Main.Configuration.Get<bool>("Fullscreen", ref fullscreen);
+			//Main.Configuration.Get<bool>("Fullscreen", ref fullscreen);
 			Main.Configuration.Get<int>("DisplayWidth", ref preferredBackBufferWidth);
 			Main.Configuration.Get<int>("DisplayHeight", ref preferredBackBufferHeight);
 			Main.mouseColor.R = Main.Configuration.Get<byte>("MouseColorR", Main.mouseColor.R);
@@ -2714,11 +_,11 @@
 					File.Delete(Main.WorldList[i].Path + ".bak");
 #endif
 				}
-				else if (SocialAPI.Cloud != null)
-				{
-					SocialAPI.Cloud.Delete(Main.WorldList[i].Path);
-				}
-				WorldIO.EraseWorld(Main.WorldList[i].Path, Main.WorldList[i].IsCloudSave);
+				//else if (SocialAPI.Cloud != null)
+				//{
+				//	SocialAPI.Cloud.Delete(Main.WorldList[i].Path);
+				//}
+                WorldIO.EraseWorld(Main.WorldList[i].Path, Main.WorldList[i].IsCloudSave);
 				Main.LoadWorlds();
 			}
 			catch
@@ -2812,7 +_,8 @@
 				}
 				text += str;
 			}
-			string text3 = cloudSave ? Main.CloudWorldPath : Main.WorldPath;
+			//string text3 = cloudSave ? Main.CloudWorldPath : (Main.setting.SaveInTModFolder ? Main.TModLoaderWorldPath : Main.WorldPath);
+			string text3 = (Main.setting.SaveInTModFolder || Main.tModLoaderModsLoaded) ? Main.TModLoaderWorldPath : (Main.setting.generateLeveledRPGSave ? Main.LeveledWorldPath : Main.WorldPath);
 			string path = string.Concat(new object[]
 				{
 					text3,
@@ -3143,7 +_,7 @@
 			}
 			else
 			{
-				Console.Title = "Terraria Server " + Main.versionNumber2 + " - " + ModLoader.ModLoader.versionedName;
+				Console.Title = "Terraria Server " + Main.versionNumber2;
 			}
 			Main.dedServ = true;
 			Main.showSplash = false;
@@ -3166,7 +_,7 @@
 				while (flag)
 				{
 					Main.LoadWorlds();
-					Console.WriteLine("Terraria Server " + Main.versionNumber2 + " - " + ModLoader.ModLoader.versionedName);
+					Console.WriteLine("Terraria Server " + Main.versionNumber2);
 					Console.WriteLine("");
 					for (int j = 0; j < Main.WorldList.Count; j++)
 					{
@@ -3374,7 +_,7 @@
 					}
 					else if (text2 == "m" || text2 == "M")
 					{
-						Interface.ServerModMenu();
+						ModLoader.Interface.ServerModMenu();
 						continue;
 					}
 					else
@@ -3568,7 +_,7 @@
 					if (target < now) //can't catch up, reset target
 					{
 						target = now + delta;
-					}
+				}
 					Thread.Sleep(Math.Max((int)remaining, 0));
 			}
 		}
@@ -3730,7 +_,7 @@
 					{
 						WorldFile.saveWorld();
 						Netplay.disconnect = true;
-						SocialAPI.Shutdown();
+						//SocialAPI.Shutdown();
 					}
 					else if (text == "fps")
 					{
@@ -4004,6 +_,17 @@
 			Main.graphics = new GraphicsDeviceManager((Game)this);
 			base.Content.RootDirectory = "Content";
 #endif
+			// Terraria.app/Contents/MacOS/Terraria.exe
+			// Terraria.app/Contents/MacOS/Content/
+#if MAC
+			//base.Content.RootDirectory = ".."+ Path.DirectorySeparatorChar +
+			//	".." + Path.DirectorySeparatorChar +
+			//	".." + Path.DirectorySeparatorChar +
+			//	"Terraria.app" +Path.DirectorySeparatorChar +
+			//	"Contents" + Path.DirectorySeparatorChar +
+			//	"MacOS" +Path.DirectorySeparatorChar +
+			//	"Content";
+#endif
 		}
 
 		protected void SetTitle()
@@ -4011,7 +_,7 @@
 #if CLIENT
 			if (Main._cachedTitle == null)
 			{
-				Main._cachedTitle = Lang.title();
+				Main._cachedTitle = "TerraCustom -- Now with tModLoader support!";// Lang.title();
 			}
 			base.Window.Title = Main._cachedTitle;
 #endif
@@ -6438,7 +_,7 @@
 			}
 			Main.clientUUID = Guid.NewGuid().ToString();
 #if CLIENT
-			keyBoardInput.newKeyEvent += delegate (char keyStroke)
+			keyBoardInput.newKeyEvent += delegate(char keyStroke)
 			{
 				if (Main.keyCount < 10)
 				{
@@ -7088,8 +_,13 @@
 			Main.gridTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Grid");
 			Main.trashTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Trash");
 			Main.cdTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "CoolDown");
-			Main.logoTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Logo");
-			Main.logo2Texture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Logo2");
+			//	Main.logoTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Logo");
+			//	Main.logo2Texture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Logo2");
+			Main.logoTexture = TerraCustomUtils.GetEmbeddedTexture2D("Terraria.TerraCustom.Logo.png");
+			Main.logo2Texture = TerraCustomUtils.GetEmbeddedTexture2D("Terraria.TerraCustom.Logo.png");
+			Main.TCTreeTops = TerraCustomUtils.GetEmbeddedTexture2D("Terraria.TerraCustom.TreeTops.png");
+			Main.TCMossColors = TerraCustomUtils.GetEmbeddedTexture2D("Terraria.TerraCustom.MossColors.png");
+			Main.TCDungeonColors = TerraCustomUtils.GetEmbeddedTexture2D("Terraria.TerraCustom.DungeonColors.png");
 			Main.dustTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Dust");
 			Main.sunTexture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Sun");
 			Main.sun2Texture = base.Content.Load<Texture2D>("Images" + Path.DirectorySeparatorChar + "Sun2");
@@ -18333,21 +_,26 @@
 							int num315 = num293;
 							while (num315 < num293 + 100)
 							{
+								// 19 total: 6 grass, 1 mush, 1 crim, 1 corrup,
+								//TileID.Grass -- 0, 6,7,8,9,10,
 								if (Main.tile[num292, num315].type == 2)
 								{
 									num310 = Main.GetTreeStyle(num292);
 									break;
 								}
+								// corrup -- 1
 								if (Main.tile[num292, num315].type == 23)
 								{
 									num310 = 1;
 									break;
 								}
+								//TileID.MushroomGrass -- 14
 								if (Main.tile[num292, num315].type == 70)
 								{
 									num310 = 14;
 									break;
 								}
+								// Jungle -- 2,11,13
 								if (Main.tile[num292, num315].type == 60)
 								{
 									num310 = 2;
@@ -18364,6 +_,7 @@
 									num313 = 48;
 									break;
 								}
+								// Snow -- 4,12,16,17,18
 								if (Main.tile[num292, num315].type == 147)
 								{
 									num310 = 4;
@@ -18400,6 +_,7 @@
 										break;
 									}
 								}
+								// Hallow == 5,3
 								else
 								{
 									if (Main.tile[num292, num315].type == 199)
@@ -36906,15 +_,15 @@
 			Utils.DrawBorderString(Main.spriteBatch, text, r3.Right() + Vector2.UnitX * num * -8f, Microsoft.Xna.Framework.Color.White * Main.invasionProgressAlpha, num * 0.9f, 1f, 0.4f, -1);
 		}
 
-		protected void QuitGame()
+		public void QuitGame()
 		{
 			Main.SaveSettings();
 #if CLIENT
-			SocialAPI.Shutdown();
+			//SocialAPI.Shutdown();
 #endif
 			base.Exit();
 #if MAC
-			SDL.SDL_DestroyWindow(base.Window.Handle);
+            SDL.SDL_DestroyWindow(base.Window.Handle);
 #endif
 		}
 
@@ -37188,9 +_,9 @@
 				}
 			}
 			int num = 250;
-			int num2 = Main.screenWidth / 2;
+			int num2 = Main.screenWidth / 2; // screenHorizontalCenter
 			int num3 = 80;
-			int num4 = 0;
+			int num4 = 0; // numberClickableLabels
 			int num5 = Main.menuMode;
 			int num6 = 0;
 			int num7 = 0;
@@ -37204,7 +_,7 @@
 			int[] array4 = new int[Main.maxMenuItems];
 			int[] array5 = new int[Main.maxMenuItems];
 			byte[] array6 = new byte[Main.maxMenuItems];
-			float[] array7 = new float[Main.maxMenuItems];
+			float[] array7 = new float[Main.maxMenuItems]; // clickableLabelScale
 			bool[] array8 = new bool[Main.maxMenuItems];
 			bool flag4 = false;
 			for (int j = 0; j < Main.maxMenuItems; j++)
@@ -37215,10 +_,14 @@
 				array5[j] = 0;
 				array7[j] = 1f;
 			}
-			string[] array9 = new string[Main.maxMenuItems];
+			string[] array9 = new string[Main.maxMenuItems]; // clickableLabelText
 			if (Main.menuMode == -1)
 			{
 				Main.menuMode = 0;
+			}
+			if (Main.menuMode == 0)
+			{
+				Main.menuMode = (int)TerraCustom.MenuModes.Settings;
 			}
 			if (Main.menuMode == 1212)
 			{
@@ -37479,10 +_,10 @@
 						Main.PlaySound(11, -1, -1, 1);
 						Main.menuMode = 0;
 						Main.netMode = 0;
-						if (SocialAPI.Network != null)
-						{
-							SocialAPI.Network.CancelJoin();
-						}
+						//if (SocialAPI.Network != null)
+						//{
+						//    SocialAPI.Network.CancelJoin();
+						//}
 					}
 				}
 				else if (Main.menuMode == 30)
@@ -37733,7 +_,7 @@
 						Main.PlaySound(11, -1, -1, 1);
 						if (WorldIO.customDataFail == null)
 						{
-							Main.menuMode = 0;
+						Main.menuMode = 0;
 						}
 						else
 						{
@@ -37766,7 +_,7 @@
 						Main.PlaySound(11, -1, -1, 1);
 						if (WorldIO.customDataFail == null)
 						{
-							Main.menuMode = 0;
+						Main.menuMode = 0;
 						}
 						else
 						{
@@ -37879,7 +_,7 @@
 						Main.menuMode = 888;
 					}
 					num9++;
-					Interface.AddMenuButtons(this, this.selectedMenu, array9, array7, ref num, ref num3, ref num9, ref num4);
+					ModLoader.Interface.AddMenuButtons(this, this.selectedMenu, array9, array7, ref num, ref num3, ref num9, ref num4);
 					array9[num9] = Lang.menu[14];
 					if (this.selectedMenu == num9)
 					{
@@ -38428,7 +_,7 @@
 						Main.MenuUI.SetState(Main._worldSelectMenu);
 						Main.menuMode = 888;
 					}
-					else if (Main.menuMode == -7)
+					else if (Main.menuMode == (int)MenuModes.SelectDifficulty /*-7*/)
 					{
 						num = 200;
 						num3 = 60;
@@ -38460,22 +_,22 @@
 						{
 							Main.expertMode = false;
 							Main.PlaySound(10, -1, -1, 1);
-							Main.menuMode = 7;
+							Main.menuMode = (int)MenuModes.EnterWorldName/*7*/;
 						}
 						else if (this.selectedMenu == 3)
 						{
 							Main.expertMode = true;
 							Main.PlaySound(10, -1, -1, 1);
-							Main.menuMode = 7;
+							Main.menuMode = (int)MenuModes.EnterWorldName /*7*/;
 						}
 						else if (this.selectedMenu == 4)
 						{
 							Main.PlaySound(11, -1, -1, 1);
-							Main.menuMode = 16;
+							Main.menuMode = (int)MenuModes.ChooseWorldSize /*0*/;
 						}
 						Main.clrInput();
 					}
-					else if (Main.menuMode == 7)
+					else if (Main.menuMode == (int)MenuModes.EnterWorldName /*7*/)
 					{
 						string a = Main.newWorldName;
 						Main.newWorldName = Main.GetInputText(Main.newWorldName);
@@ -38538,14 +_,17 @@
 						if (this.selectedMenu == 3)
 						{
 							Main.PlaySound(11, -1, -1, 1);
-							Main.menuMode = -7;
+							Main.menuMode = (int)MenuModes.SelectDifficulty /*- 7*/; // 0?? -7 is Expert mode selection
+							// World size -> difficulty -> name
 						}
 						if (this.selectedMenu == 2 || (!array2[2] && Main.inputTextEnter))
 						{
-							Main.menuMode = 10;
+							Main.menuMode = (int)MenuModes.Settings;
+							/*
 							Main.worldName = Main.newWorldName;
 							Main.ActiveWorldFileData = WorldFile.CreateMetadata(Main.worldName, SocialAPI.Cloud != null && SocialAPI.Cloud.EnabledByDefault, Main.expertMode);
 							WorldGen.CreateNewWorld(null);
+							*/
 						}
 					}
 					else if (Main.menuMode == 8)
@@ -38841,7 +_,7 @@
 							Main.PlaySound(11, -1, -1, 1);
 							Main.menuMode = 272727;
 						}
-						Interface.AddSettingsMenuButtons(this, this.selectedMenu, array9, array7, array4, ref num, ref num3, ref num20, ref num4);
+						ModLoader.Interface.AddSettingsMenuButtons(this, this.selectedMenu, array9, array7, array4, ref num, ref num3, ref num20, ref num4);
 						num20++;
 						array9[num20] = Lang.menu[103];
 						if (this.selectedMenu == num20)
@@ -39593,7 +_,8 @@
 					}
 					else
 					{
-						Interface.ModLoaderMenus(this, this.selectedMenu, array9, array7, array4, ref num, ref num3, ref num4);
+						TerraCustom.Interface.TerraCustomMenu(this, this.selectedMenu, array, array9, array7, array4, ref num, ref num3, ref num4);
+						ModLoader.Interface.ModLoaderMenus(this, this.selectedMenu, array9, array7, array4, ref num, ref num3, ref num4);
 					}
 				}
 			}
@@ -40345,11 +_,10 @@
 				{
 					num98 = 2;
 				}
-				string drawVersion = Main.versionNumber + Environment.NewLine + ModLoader.ModLoader.versionedName;
-				Vector2 origin3 = Main.fontMouseText.MeasureString(drawVersion);
+				Vector2 origin3 = Main.fontMouseText.MeasureString(Main.versionNumber);
 				origin3.X *= 0.5f;
 				origin3.Y *= 0.5f;
-				Main.spriteBatch.DrawString(Main.fontMouseText, drawVersion, new Vector2(origin3.X + (float)num97 + 10f, (float)Main.screenHeight - origin3.Y + (float)num98 - 2f), color11, 0f, origin3, 1f, SpriteEffects.None, 0f);
+				Main.spriteBatch.DrawString(Main.fontMouseText, Main.versionNumber, new Vector2(origin3.X + (float)num97 + 10f, (float)Main.screenHeight - origin3.Y + (float)num98 - 2f), color11, 0f, origin3, 1f, SpriteEffects.None, 0f);
 			}
 			Vector2 value = Main.DrawThickCursor(false);
 			Main.spriteBatch.Draw(Main.cursorTextures[0], new Vector2((float)Main.mouseX, (float)Main.mouseY) + value + Vector2.One, null, new Microsoft.Xna.Framework.Color((int)((float)Main.cursorColor.R * 0.2f), (int)((float)Main.cursorColor.G * 0.2f), (int)((float)Main.cursorColor.B * 0.2f), (int)((float)Main.cursorColor.A * 0.5f)), 0f, default(Vector2), Main.cursorScale * 1.1f, SpriteEffects.None, 0f);
@@ -53898,8 +_,8 @@
 									}
 								}
 							}
-						}
-					}
+								}
+							}
 					if (type >= 30 && type <= 35 && type != 39)
 					{
 						if (Main.ambientError > 0)

